{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat Commands - TikTok Live</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        
        .blueheading {
            color: #007bff;
            font-size: 1.5em;
            margin-bottom: 10px;
        }
        
        .greyBackgroundSection {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            width: 900px;
            max-width: 100%;
        }
        
        .redNotification {
            background-color: #f8d7da;
            color: #721c24;
            padding: 10px;
            border: 1px solid #f5c6cb;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        
        .dxForm {
            margin-top: 20px;
        }
        
        .form {
            display: flex;
            flex-direction: column;
        }
        
        .dx-fieldset {
            border: none;
            padding: 0;
            margin: 0;
        }
        
        .dx-field {
            display: flex;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e9ecef;
        }
        
        .dx-field:last-child {
            border-bottom: none;
        }
        
        .dx-field-label {
            flex: 0 0 200px;
            display: flex;
            align-items: center;
            font-weight: bold;
        }
        
        .dx-field-value {
            flex: 1;
            display: flex;
            align-items: center;
        }
        
        .optionCheckbox {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .dx-textbox {
            width: 200px;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
        }
        
        .dx-texteditor {
            position: relative;
        }
        
        .dx-texteditor-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ced4da;
            border-radius: 4px;
            font-size: 14px;
            outline: none;
        }
        
        .dx-texteditor-input:focus {
            border-color: #007bff;
            box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);
        }
        
        .gotoCommandSettingsButton {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            margin-left: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }
        
        .gotoCommandSettingsButton:hover {
            background-color: #5a6268;
        }
        
        .gotoCommandSettingsButton:disabled {
            background-color: #6c757d;
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .helpTextBehindTextBox {
            margin-left: 10px;
        }
        
        .helpTextBehindTextBox a {
            color: #007bff;
            text-decoration: none;
            font-size: 14px;
        }
        
        .helpTextBehindTextBox a:hover {
            text-decoration: underline;
        }
        
        .helptitle {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .helptext {
            color: #6c757d;
            font-size: 14px;
        }
        
        .noTopMarginHeader {
            margin-top: 0;
        }
        
        .largeCommandDescriptionLabels .dx-field-label {
            flex: 0 0 250px;
        }
        
        .dx-show-invalid-badge {
            position: relative;
        }
        
        .dx-checkbox {
            position: relative;
            display: inline-block;
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .dx-checkbox-container {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            height: 100%;
            border: 2px solid #adb5bd;
            border-radius: 3px;
        }
        
        .dx-checkbox-checked .dx-checkbox-container {
            background-color: #007bff;
            border-color: #007bff;
        }
        
        .dx-checkbox-icon {
            display: block;
            width: 10px;
            height: 10px;
            background-color: white;
            clip-path: polygon(20% 40%, 0 60%, 40% 100%, 100% 20%, 80% 0, 60% 60%);
        }
        
        .dx-state-disabled {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .dx-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-size: 14px;
            transition: all 0.2s;
        }
        
        .dx-button-content {
            display: flex;
            align-items: center;
        }
        
        .dx-icon {
            font-size: 16px;
        }
        
        .dx-icon-preferences::before {
            content: "⚙️";
        }
        
        .dx-button-mode-contained {
            background-color: #6c757d;
            color: white;
        }
        
        .dx-button-mode-contained:hover {
            background-color: #5a6268;
        }
        
        .dx-button-has-icon {
            padding: 6px 10px;
        }
        
        .dx-widget {
            outline: none;
        }
        
        .dx-editor-outlined {
            border: 1px solid #ced4da;
            border-radius: 4px;
        }
        
        .btn-save {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 20px;
        }
        
        .btn-save:hover {
            background-color: #218838;
        }
        
        .desktopAppPromotion {
            background-color: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
        }
        
        .promotion-content {
            text-align: center;
            font-size: 16px;
        }
        
        .promotion-content a {
            color: #155724;
            font-weight: bold;
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div data-pageid="chatcommands">
        <div class="desktopAppPromotion" style="display: block;">
            <div class="promotion-content">
                Get the free <a href="/app/">TikFinity Desktop App</a> for Windows to enjoy additional features and stability improvements!
            </div>
        </div>

        <div class="setupUnconnected" style="display: none;">
            <div class="redNotification" style="cursor: pointer;" onclick="navigation.pageChange('setup')">
                <div class="error" data-str="start_setup_required">Please run the <a onclick="navigation.pageChange('setup')">Setup</a> first to create a free TikFinity Account!</div>
            </div>
            <br>
        </div>

        <h2 class="blueheading" data-str="chatcommands_head">Chat Commands</h2>
        <div data-str="chatcommands_desc">
            TikFinity accepts the following commands.<br>
            You can change the commands, as well as specify other settings by clicking on the cogwheel.<br>
            Please keep in mind that on TikTok certain words or commands are filtered depending on the region.<br>
            If this is the case, use other chat commands.
        </div>

        <br><br>

        <div class="greyBackgroundSection" style="width: 900px">
            <div class="dxForm">
                <div class="form">
                    <div class="dx-fieldset">
                        <form method="post">
                            {% csrf_token %}
                            
                            <div class="dx-field">
                                <div class="dx-field-label">
                                    {{ form.help_enabled }} <span data-str="chatcommands_command_help">Help</span>
                                </div>
                                <div class="dx-field-value">
                                    {{ form.help_command }}
                                    <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                        <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                    </div>
                                    <div class="helpTextBehindTextBox">
                                        <a onclick="utils.openHelpPopup(this)">
                                            <i class="far fa-question-circle"></i> 
                                            <span data-str="chatcommands_command_how_it_works">How does this command work?</span>
                                        </a>
                                    </div>
                                    <div style="display: none;">
                                        <div class="helptitle" data-str="chatcommands_command_help_head">The Help Command</div>
                                        <div class="helptext" data-str="chatcommands_command_help_desc">
                                            When a viewer enters the command <b class="cmdhelp">!help</b>, the command info screen overlay shows list of available commands.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dx-field">
                                <div class="dx-field-label">
                                    {{ form.get_points_enabled }} <span data-str="chatcommands_command_score">Points Information</span>
                                </div>
                                <div class="dx-field-value">
                                    {{ form.get_points_command }}
                                    <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                        <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                    </div>
                                    <div class="helpTextBehindTextBox">
                                        <a onclick="utils.openHelpPopup(this)">
                                            <i class="far fa-question-circle"></i> 
                                            <span data-str="chatcommands_command_how_it_works">How does this command work?</span>
                                        </a>
                                    </div>
                                    <div style="display: none;">
                                        <div class="helptitle" data-str="chatcommands_command_score_head">Points Information Command</div>
                                        <div class="helptext" data-str="chatcommands_command_score_desc">
                                            With the command <b class="cmdgetpoints">!score</b>, viewers can check their current score in the points system. The user info screen overlay will display the user score and level.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dx-field">
                                <div class="dx-field-label">
                                    {{ form.transfer_points_enabled }} <span data-str="chatcommands_command_send">Points Transfer</span>
                                </div>
                                <div class="dx-field-value">
                                    {{ form.transfer_points_command }}
                                    <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                        <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                    </div>
                                    <div class="helpTextBehindTextBox">
                                        <a onclick="utils.openHelpPopup(this)">
                                            <i class="far fa-question-circle"></i> 
                                            <span data-str="chatcommands_command_how_it_works">How does this command work?</span>
                                        </a>
                                    </div>
                                    <div style="display: none;">
                                        <div class="helptitle" data-str="chatcommands_command_send_head">Points Transfer Command</div>
                                        <div class="helptext" data-str="chatcommands_command_send_desc">
                                            Viewers can send points of your currency to each other. These points are then deducted from the sender and credited to the recipient. To do this, the command must be written in the chat as follows:<br><br>
                                            <b><b class="cmdtransferpoints">!send</b> Amount Receiver</b><br><br>
                                            <b>Amount</b> stands for the number of points to be transferred.<br>
                                            <b>Receiver</b> represents the target username.<br><br>
                                            Example: <b><b class="cmdtransferpoints">!send</b> 10 zerody</b><br><br>
                                            ... would send 10 points to the user 'zerody'.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dx-field">
                                <div class="dx-field-label">
                                    {{ form.spin_enabled }} <span data-str="chatcommands_command_spin">Wheel of Fortune</span>
                                </div>
                                <div class="dx-field-value">
                                    {{ form.spin_command }}
                                    <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-button-has-icon" data-destpage="wheel" aria-label="preferences" tabindex="0" role="button">
                                        <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                    </div>
                                    <div class="helpTextBehindTextBox">
                                        <a onclick="utils.openHelpPopup(this)">
                                            <i class="far fa-question-circle"></i> 
                                            <span data-str="chatcommands_command_how_it_works">How does this command work?</span>
                                        </a>
                                    </div>
                                    <div style="display: none;">
                                        <div class="helptitle" data-str="chatcommands_command_spin_head">Wheel of Fortune Command</div>
                                        <div class="helptext" data-str="chatcommands_command_spin_desc">
                                            Viewers can use the command <b class="cmdspin">!spin</b> to spin the Wheel of Fortune in your stream. To use this, the Wheel of Fortune Overlay for OBS/LIVE Studio is required, which you can find on the page "OBS Overlays". After the Wheel of Fortune stops, the number of points won will be credited to the user. You can set the settings by clicking on the cogwheel.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="dx-field">
                                <div class="dx-field-label">
                                    {{ form.coin_drop_enabled }} <span data-str="chatcommands_command_coindrop">Points Drop</span>
                                </div>
                                <div class="dx-field-value">
                                    {{ form.coin_drop_command }}
                                    <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-button-has-icon" data-destpage="coindrop" aria-label="preferences" tabindex="0" role="button">
                                        <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                    </div>
                                </div>
                            </div>
                            
                            <input type="submit" value="Save Settings" class="btn-save">
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <br><br>

        <div class="greyBackgroundSection" style="width: 900px">
            <h3 class="blueheading noTopMarginHeader" data-str="chatcommands_custom_head">Custom Commands</h3>
            <div data-str="chatcommands_custom_desc">
                You can define your own chat commands using the <a onclick="navigation.pageChange('actionsandevents')">Actions &amp; Events</a> functionality.<br>
                Viewers can list them using the following commands. The output is shown in the 
                <a onclick="navigation.pageChange('obsoverlays');obsoverlays.scrollToWidget('CommandInfo')">Command Info Overlay</a> for OBS/LIVE Studio.
            </div>

            <br><br>

            <div class="dxForm">
                <div class="form">
                    <div class="dx-fieldset largeCommandDescriptionLabels">
                        <div class="dx-field">
                            <div class="dx-field-label">
                                {{ form.custom_commands_enabled }} <span data-str="chatcommands_custom_commands">Show global commands</span>
                            </div>
                            <div class="dx-field-value">
                                {{ form.custom_commands_command }}
                                <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                    <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dx-field">
                            <div class="dx-field-label">
                                {{ form.custom_sub_commands_enabled }} <span data-str="chatcommands_custom_sub_commands">Show subscriber commands</span>
                            </div>
                            <div class="dx-field-value">
                                {{ form.custom_sub_commands_command }}
                                <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                    <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="dx-field">
                            <div class="dx-field-label">
                                {{ form.custom_user_commands_enabled }} <span data-str="chatcommands_custom_user_commands">Show user personal commands</span>
                            </div>
                            <div class="dx-field-value">
                                {{ form.custom_user_commands_command }}
                                <div class="gotoCommandSettingsButton dx-button dx-button-normal dx-button-mode-contained dx-widget dx-state-disabled dx-button-has-icon" aria-label="preferences" aria-disabled="true" role="button">
                                    <div class="dx-button-content"><i class="dx-icon dx-icon-preferences"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <input type="submit" value="Save Settings" class="btn-save" form="custom-commands-form">
        </div>
    </div>

    <script src="{% static 'js/chat_commands.js' %}"></script>
</body>
</html>